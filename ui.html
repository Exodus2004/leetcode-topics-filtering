<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeetCode Topic Filter</title>
    <style>
        :root {
            /* Stripe color palette */
            --stripe-dark-bg: #0c0e1a;
            --stripe-card-bg: rgba(255, 255, 255, 0.08);
            --stripe-light-text: #ffffff;
            --stripe-muted-text: #cccccc;
            --stripe-placeholder-text: #bbbbbb;
            --stripe-accent: #635bff;
            --stripe-accent-hover: #7b73ff;
            --stripe-border: rgba(255, 255, 255, 0.1);
            --stripe-success: #10B981;
            --stripe-warning: #F59E0B;
            --stripe-error: #EF4444;
            --stripe-tag-bg: rgba(255, 255, 255, 0.1);
            --stripe-input-bg: rgba(255, 255, 255, 0.05);
            --stripe-button-bg: #635bff;
            --stripe-button-hover: #7b73ff;
            --stripe-radius: 16px;
            --stripe-radius-sm: 12px;
            --stripe-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            --stripe-shadow-lg: 0 12px 40px rgba(0, 0, 0, 0.3);
            --transition-fast: 150ms ease-in-out;
            --transition-normal: 200ms ease-in-out;
            --transition-slow: 300ms ease-in-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Times New Roman", Times, serif;
            color: var(--stripe-light-text);
            line-height: 1.6;
            padding: 24px;
            min-height: 100vh;
            transition: background-color var(--transition-normal);
            /* Stripe's exact gradient background with all colors */
            background: linear-gradient(-45deg, 
                #635bff, /* Purple */
                #ff5c33, /* Orange */
                #00c4cc, /* Teal */
                #ff66b2, /* Pink */
                #635bff);
            background-size: 400% 400%;
            animation: gradient 12s ease infinite;
            position: relative;
            overflow-x: hidden;
            font-size: 18px;
        }
        
        /* Stripe's exact animated gradient with all colors */
        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        /* Enhanced glassmorphism effect for all cards */
        .glass-card {
            background: var(--stripe-card-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: var(--stripe-radius);
            border: 1px solid var(--stripe-border);
            box-shadow: var(--stripe-shadow);
            transition: all var(--transition-fast);
            position: relative;
            overflow: hidden;
        }
        
        /* Glass card inner glow effect */
        .glass-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                rgba(99, 91, 255, 0.3), 
                rgba(255, 92, 51, 0.3), 
                rgba(0, 196, 204, 0.3));
            z-index: -1;
            border-radius: calc(var(--stripe-radius) + 2px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .glass-card:hover::before {
            opacity: 1;
        }
        
        .glass-card:hover {
            box-shadow: var(--stripe-shadow-lg);
            transform: translateY(-2px);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }
        
        h1 {
            color: var(--stripe-light-text);
            text-align: center;
            font-size: 42px;
            font-weight: 800;
            margin-bottom: 32px;
            letter-spacing: -0.8px;
            transition: color var(--transition-fast);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .card {
            padding: 40px;
            margin-bottom: 32px;
            transform: translateY(0);
            opacity: 1;
        }
        
        .card.fade-in {
            animation: fadeInUp var(--transition-normal) forwards;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .input-group {
            margin-bottom: 28px;
        }
        
        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 500;
            color: var(--stripe-light-text);
            font-size: 20px;
            transition: color var(--transition-fast);
        }
        
        button {
            background-color: var(--stripe-button-bg);
            color: white;
            padding: 16px 24px;
            border: none;
            border-radius: var(--stripe-radius-sm);
            cursor: pointer;
            font-size: 20px;
            font-weight: 600;
            transition: all var(--transition-fast);
            box-shadow: var(--stripe-shadow);
            position: relative;
            overflow: hidden;
            font-family: "Times New Roman", Times, serif;
        }
        
        button:hover:not(:disabled) {
            background-color: var(--stripe-button-hover);
            box-shadow: var(--stripe-shadow-lg);
            transform: translateY(-3px);
        }
        
        button:active:not(:disabled) {
            transform: translateY(0);
            box-shadow: var(--stripe-shadow);
        }
        
        button:disabled {
            background-color: #4B5563;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        button .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.7);
            transform: scale(0);
            animation: ripple var(--transition-fast) linear;
        }
        
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        #results {
            margin-top: 32px;
        }
        
        .problem {
            padding: 28px;
            margin-bottom: 20px;
            transition: all var(--transition-fast);
            cursor: pointer;
            transform: translateY(0);
            opacity: 1;
        }
        
        .problem:hover {
            transform: translateY(-4px);
            box-shadow: var(--stripe-shadow-lg);
        }
        
        .problem-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--stripe-light-text);
            margin-bottom: 20px;
            transition: color var(--transition-fast);
        }
        
        .problem-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .tag {
            background-color: var(--stripe-tag-bg);
            color: var(--stripe-light-text);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 500;
            transition: all var(--transition-fast);
            border: 1px solid transparent;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            font-family: "Times New Roman", Times, serif;
        }
        
        .tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            /* Color change based on gradient colors */
            background: linear-gradient(45deg, 
                rgba(99, 91, 255, 0.5), 
                rgba(255, 92, 51, 0.5));
        }
        
        .loading {
            text-align: center;
            padding: 50px 30px;
            border-radius: var(--stripe-radius-sm);
            transition: all var(--transition-fast);
        }
        
        .loading-spinner {
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-top: 5px solid var(--stripe-accent);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            animation: spin var(--transition-slow) linear infinite;
            margin: 0 auto 24px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            color: var(--stripe-error);
            text-align: center;
            padding: 30px;
            border-radius: var(--stripe-radius-sm);
            font-weight: 500;
            transition: all var(--transition-fast);
            transform: translateY(0);
            opacity: 1;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        
        .info {
            color: var(--stripe-accent);
            text-align: center;
            padding: 30px;
            border-radius: var(--stripe-radius-sm);
            font-weight: 500;
            margin-top: 20px;
            transition: all var(--transition-fast);
            background: rgba(99, 91, 255, 0.1);
            border: 1px solid rgba(99, 91, 255, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo {
            width: 48px;
            height: 48px;
            /* Stripe gradient for logo */
            background: linear-gradient(135deg, 
                #635bff, 
                #ff5c33);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-weight: 800;
            font-size: 22px;
            transition: all var(--transition-fast);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
            flex-shrink: 0;
        }
        
        .header h1 {
            margin: 0;
            line-height: 1.2;
            align-self: center;
        }
        
        .logo {
            width: 48px;
            height: 48px;
            /* Stripe gradient for logo */
            background: linear-gradient(135deg, 
                #635bff, 
                #ff5c33);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-weight: 800;
            font-size: 22px;
            transition: all var(--transition-fast);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }
        
        /* Enhanced animations */
        .fade-in {
            animation: fadeIn var(--transition-normal) forwards;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .slide-in {
            animation: slideIn var(--transition-normal) forwards;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(25px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Staggered animations for lists */
        .problem:nth-child(1) { animation-delay: 0ms; }
        .problem:nth-child(2) { animation-delay: 70ms; }
        .problem:nth-child(3) { animation-delay: 140ms; }
        .problem:nth-child(4) { animation-delay: 210ms; }
        .problem:nth-child(5) { animation-delay: 280ms; }
        .problem:nth-child(6) { animation-delay: 350ms; }
        .problem:nth-child(7) { animation-delay: 420ms; }
        .problem:nth-child(8) { animation-delay: 490ms; }
        .problem:nth-child(9) { animation-delay: 560ms; }
        .problem:nth-child(10) { animation-delay: 630ms; }
        
        /* Skeleton loading animation */
        .skeleton {
            background: linear-gradient(90deg, 
                rgba(99, 91, 255, 0.2), 
                rgba(255, 92, 51, 0.2), 
                rgba(0, 196, 204, 0.2), 
                rgba(99, 91, 255, 0.2));
            background-size: 300% 100%;
            animation: loading 1.5s ease-in-out infinite;
            border-radius: var(--stripe-radius-sm);
            min-height: 24px;
        }
        
        @keyframes loading {
            0% {
                background-position: 300% 0;
            }
            100% {
                background-position: 0% 0;
            }
        }
        
        .skeleton-card {
            margin-bottom: 20px;
            padding: 28px;
            border-radius: var(--stripe-radius-sm);
            border: 1px solid var(--stripe-border);
        }
        
        .skeleton-title {
            height: 24px;
            width: 65%;
            margin-bottom: 20px;
        }
        
        .skeleton-tag {
            display: inline-block;
            height: 32px;
            width: 80px;
            border-radius: 16px;
            margin-right: 10px;
        }
        
        /* Pulse animation for loading states */
        .pulse {
            animation: pulse var(--transition-slow) ease-in-out infinite alternate;
        }
        
        @keyframes pulse {
            from {
                opacity: 0.6;
            }
            to {
                opacity: 1;
            }
        }
        
        /* Topic buttons styles */
        .topic-buttons-container {
            margin-bottom: 20px;
        }
        
        .topic-buttons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            border-radius: var(--stripe-radius-sm);
            background: rgba(0, 0, 0, 0.1);
        }
        
        /* Custom scrollbar styling */
        .topic-buttons-grid::-webkit-scrollbar {
            width: 8px;
        }
        
        .topic-buttons-grid::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        .topic-buttons-grid::-webkit-scrollbar-thumb {
            background: var(--stripe-accent);
            border-radius: 4px;
        }
        
        .topic-buttons-grid::-webkit-scrollbar-thumb:hover {
            background: var(--stripe-accent-hover);
        }
        
        /* For Firefox */
        .topic-buttons-grid {
            scrollbar-width: thin;
            scrollbar-color: var(--stripe-accent) rgba(255, 255, 255, 0.05);
        }
        
        .topic-btn {
            background-color: var(--stripe-tag-bg);
            color: var(--stripe-light-text);
            border: 1px solid var(--stripe-border);
            border-radius: 30px; /* Circular borders */
            padding: 12px 16px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            transition: all var(--transition-fast);
            text-align: center;
            box-shadow: none;
            font-family: "Times New Roman", Times, serif;
        }
        
        .topic-btn:hover {
            background-color: var(--stripe-accent);
            transform: translateY(-2px);
            box-shadow: var(--stripe-shadow);
        }
        
        .topic-btn.selected {
            background-color: var(--stripe-accent);
            border-color: var(--stripe-accent-hover);
            box-shadow: var(--stripe-shadow);
            transform: translateY(-2px);
        }
        
        .topic-btn.selected:hover {
            background-color: #7b73ff;
        }
        
        .selected-topics {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            min-height: 40px;
        }
        
        .selected-topic {
            background-color: var(--stripe-accent);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
            font-weight: 500;
            font-family: "Times New Roman", Times, serif;
        }
        
        .remove-topic {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .topic-instructions {
            font-size: 14px;
            color: var(--stripe-muted-text);
            margin-top: 15px;
            font-style: italic;
            text-align: center;
            font-family: "Times New Roman", Times, serif;
        }
        
        .clear-all-btn {
            background-color: var(--stripe-error);
            color: white;
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: var(--stripe-radius-sm);
            padding: 8px 16px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all var(--transition-fast);
            margin-top: 15px;
            width: auto;
            display: inline-block;
            font-family: "Times New Roman", Times, serif;
        }
        
        .clear-all-btn:hover {
            background-color: #ff5555;
            border-color: #ff6666;
        }
        
        .selected-topics-header {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--stripe-light-text);
            font-family: "Times New Roman", Times, serif;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .topic-buttons-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            h1 {
                font-size: 28px;
            }
            
            .card {
                padding: 24px;
            }
        }
        
        @media (max-width: 480px) {
            .topic-buttons-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <div class="logo">LF</div>
                <h1>LeetCode Topic Filter</h1>
            </div>
        </div>
        <div class="card glass-card fade-in">
            <div class="input-group">
                <label>Select Topics:</label>
                <div class="topic-buttons-container">
                    <div class="topic-buttons-grid" id="topic-buttons-container">
                        <!-- Topic buttons will be added here dynamically -->
                    </div>
                    <div class="selected-topics-header">Selected Topics:</div>
                    <div class="selected-topics" id="selected-topics-container">
                        <!-- Selected topics will be added here dynamically -->
                    </div>
                    <button id="clear-all-btn" class="clear-all-btn">Clear All Topics</button>
                    <p class="topic-instructions">Click on topic buttons to select them. Add one or more topics and click "Filter Problems" to find LeetCode problems matching ALL selected topics.</p>
                </div>
            </div>
            <button id="filter-btn">Filter Problems</button>
        </div>
        <div id="results"></div>
    </div>

    <script>
        // All available topics
        const ALL_TOPICS = [
          "array",
          "backtracking",
          "biconnected component",
          "binary indexed tree",
          "binary search",
          "binary search tree",
          "binary tree",
          "bit manipulation",
          "bitmask",
          "brainteaser",
          "breadth-first search",
          "bucket sort",
          "combinatorics",
          "concurrency",
          "counting",
          "counting sort",
          "data stream",
          "database",
          "depth-first search",
          "design",
          "divide and conquer",
          "doubly-linked list",
          "dynamic programming",
          "enumeration",
          "eulerian circuit",
          "game theory",
          "geometry",
          "graph",
          "greedy",
          "hash function",
          "hash table",
          "heap (priority queue)",
          "interactive",
          "iterator",
          "line sweep",
          "linked list",
          "math",
          "matrix",
          "memoization",
          "merge sort",
          "minimum spanning tree",
          "monotonic queue",
          "monotonic stack",
          "number theory",
          "ordered set",
          "prefix sum",
          "probability and statistics",
          "queue",
          "quickselect",
          "radix sort",
          "randomized",
          "recursion",
          "rejection sampling",
          "reservoir sampling",
          "rolling hash",
          "segment tree",
          "shell",
          "shortest path",
          "simulation",
          "sliding window",
          "sort",
          "sorting",
          "stack",
          "string",
          "string matching",
          "strongly connected component",
          "suffix array",
          "topological sort",
          "tree",
          "trie",
          "two pointers",
          "union find",
        ];
        
        // Keep track of selected topics
        let selectedTopics = [];
        
        // Initialize the topic buttons
        function initializeTopicButtons() {
            const container = document.getElementById('topic-buttons-container');
            container.innerHTML = '';
            
            // Add all topics as buttons
            ALL_TOPICS.forEach(topic => {
                const button = document.createElement('button');
                button.className = 'topic-btn';
                button.textContent = topic;
                button.setAttribute('data-topic', topic);
                button.addEventListener('click', () => toggleTopicSelection(topic));
                container.appendChild(button);
            });
        }
        
        // Toggle topic selection
        function toggleTopicSelection(topic) {
            if (selectedTopics.includes(topic)) {
                // Remove topic
                selectedTopics = selectedTopics.filter(t => t !== topic);
            } else {
                // Add topic
                selectedTopics.push(topic);
            }
            updateUI();
        }
        
        // Update UI after selection changes
        function updateUI() {
            // Update button states
            document.querySelectorAll('.topic-btn').forEach(button => {
                const topic = button.getAttribute('data-topic');
                if (selectedTopics.includes(topic)) {
                    button.classList.add('selected');
                } else {
                    button.classList.remove('selected');
                }
            });
            
            // Update selected topics display
            renderSelectedTopics();
        }
        
        // Remove a topic from the selected topics list
        function removeSelectedTopic(topic) {
            selectedTopics = selectedTopics.filter(t => t !== topic);
            updateUI();
        }
        
        // Clear all selected topics
        function clearAllTopics() {
            selectedTopics = [];
            updateUI();
        }
        
        // Render the selected topics
        function renderSelectedTopics() {
            const container = document.getElementById('selected-topics-container');
            container.innerHTML = '';
            
            if (selectedTopics.length === 0) {
                container.innerHTML = '<div class="topic-instructions">No topics selected yet</div>';
                return;
            }
            
            selectedTopics.forEach(topic => {
                const topicElement = document.createElement('div');
                topicElement.className = 'selected-topic';
                topicElement.innerHTML = `
                    <span>${topic}</span>
                    <button class="remove-topic" data-topic="${topic}">×</button>
                `;
                container.appendChild(topicElement);
            });
            
            // Add event listeners to remove buttons
            document.querySelectorAll('.remove-topic').forEach(button => {
                button.addEventListener('click', (e) => {
                    const topic = e.target.getAttribute('data-topic');
                    removeSelectedTopic(topic);
                });
            });
        }
        
        // Add ripple effect to filter button
        document.getElementById('filter-btn').addEventListener('click', function(e) {
            const button = e.currentTarget;
            const ripple = document.createElement('span');
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.classList.add('ripple');
            ripple.style.width = ripple.style.height = `${size}px`;
            ripple.style.left = `${x}px`;
            ripple.style.top = `${y}px`;
            
            button.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 300);
            
            // Execute the filter function
            filterProblems();
        });
        
        // Clear all topics button event listener
        document.getElementById('clear-all-btn').addEventListener('click', function() {
            clearAllTopics();
        });
        
        async function filterProblems() {
            const resultsDiv = document.getElementById('results');
            const filterBtn = document.getElementById('filter-btn');
            
            if (selectedTopics.length === 0) {
                resultsDiv.innerHTML = '<div class="error fade-in" style="color: #ffffff; font-weight: bold;">Please select at least one topic</div>';
                return;
            }
            
            // Disable button and show loading with skeleton
            filterBtn.disabled = true;
            resultsDiv.innerHTML = `
                <div class="loading fade-in">
                    <div class="loading-spinner pulse"></div>
                    <p>Fetching problems from LeetCode...</p>
                    <p class="info">This may take 1-2 minutes on first load.<br>Subsequent requests will be faster due to caching.</p>
                </div>
            `;
            
            // Add skeleton loading for better UX
            setTimeout(() => {
                if (resultsDiv.innerHTML.includes('loading-spinner')) {
                    resultsDiv.innerHTML = `
                        <div class="skeleton-card glass-card">
                            <div class="skeleton skeleton-title"></div>
                            <div class="skeleton skeleton-tag"></div>
                            <div class="skeleton skeleton-tag"></div>
                            <div class="skeleton skeleton-tag"></div>
                        </div>
                        <div class="skeleton-card glass-card">
                            <div class="skeleton skeleton-title"></div>
                            <div class="skeleton skeleton-tag"></div>
                            <div class="skeleton skeleton-tag"></div>
                        </div>
                        <div class="skeleton-card glass-card">
                            <div class="skeleton skeleton-title"></div>
                            <div class="skeleton skeleton-tag"></div>
                            <div class="skeleton skeleton-tag"></div>
                            <div class="skeleton skeleton-tag"></div>
                        </div>
                    `;
                }
            }, 800);
            
            try {
                const response = await fetch('/filter', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ topics: selectedTopics })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    resultsDiv.innerHTML = `<div class="error fade-in">
                        <p>${data.error || 'Error fetching problems. Please try again.'}</p>
                        <p class="info">If this persists, check the server console for detailed error messages.</p>
                    </div>`;
                    return;
                }
                
                if (data.problems.length === 0) {
                    resultsDiv.innerHTML = '<div class="error fade-in" style="color: #ffffff; font-weight: bold;">No problems found matching all selected topics. Try different topic combinations.</div>';
                    return;
                }
                
                const problemsHTML = data.problems.map((problem, index) => `
                    <div class="problem glass-card slide-in">
                        <div class="problem-title">${problem.title}</div>
                        <div class="problem-tags">
                            ${problem.tags && problem.tags.length > 0 
                                ? problem.tags.map(tag => `<span class="tag">${tag}</span>`).join('')
                                : '<span class="tag">No tags available</span>'}
                        </div>
                    </div>
                `).join('');
                
                resultsDiv.innerHTML = problemsHTML;
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error fade-in">
                    <p>Error connecting to server: ${error.message}</p>
                    <p class="info">Make sure the server is running.<br>Start it with: npm start</p>
                </div>`;
            } finally {
                filterBtn.disabled = false;
            }
        }
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initializeTopicButtons();
            renderSelectedTopics(); // Show initial "No topics selected" message
        });
    </script>
</body>
</html>